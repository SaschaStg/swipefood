<div class="settings-container" *ngIf="user">
  <div class="logout-btn-container">
    <button mat-flat-button type="button" color="primary" [disabled]="!authService.isLoggedIn()" (click)="logout()">
      <mat-icon>logout</mat-icon>
      Logout
    </button>
  </div>
  <mat-card>
    <form [formGroup]="UserData">
      <mat-card-header>
        <mat-card-title aria-label="Settings">
          <h2>
            Settings
          </h2>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle>
          <h3>
            User Data
          </h3>
        </mat-card-subtitle>
        <mat-form-field class="settings-input" aria-label="Change Display-name">
          <mat-label>Change Displayname</mat-label>
          <input matInput placeholder="Username" formControlName="displayName">
          <mat-icon matSuffix>edit</mat-icon>
        </mat-form-field>
        <mat-card-subtitle>
          <h3>
            User Preferences
          </h3>
        </mat-card-subtitle>

        <mat-chip-listbox aria-label="Diary selection" multiple>
          <mat-chip-option [selected]="user.vegetarian" (selectionChange)="updateDiet($event,'vegetarian')" color="primary">vegetarian
          </mat-chip-option>
          <mat-chip-option [selected]="user.vegan" (selectionChange)="updateDiet($event,'vegan')">vegan
          </mat-chip-option>
          <mat-chip-option [selected]="user.glutenFree" (selectionChange)="updateDiet($event,'glutenFree')">glutenFree
          </mat-chip-option>
          <mat-chip-option [selected]="user.dairyFree" (selectionChange)="updateDiet($event,'dairyFree')">dairyFree
          </mat-chip-option>
        </mat-chip-listbox>


      </mat-card-content>
    </form>
  </mat-card>
  <div class="settings-button">
    <button mat-raised-button (click)="updateUserData()" color="primary"
            [disabled]="UserData.get('displayName')?.value === user.displayName &&
      updatedUser.vegetarian === user.vegetarian &&
      updatedUser.vegan === user.vegan &&
      updatedUser.glutenFree === user.glutenFree &&
      updatedUser.dairyFree === user.dairyFree"
    >
      <mat-icon>save</mat-icon>
      Save Changes
    </button>
  </div>
</div>
<div class="settings-container">
  <mat-card>
    <form [formGroup]="UserCredentials">
      <mat-card-content>
        <mat-card-subtitle>
          <h3>
            Change Password and Username
          </h3>
        </mat-card-subtitle>
        <mat-form-field class="settings-input">
          <mat-label>Current Password</mat-label>
          <input matInput placeholder="Current Password" formControlName="currentPassword" type="password">
          <mat-icon matSuffix>edit</mat-icon>
        </mat-form-field>
        <mat-form-field class="settings-input">
          <mat-label>New Password</mat-label>
          <input matInput placeholder="New Password" formControlName="newPassword" type="password">
          <mat-icon matSuffix>edit</mat-icon>
        </mat-form-field>
        <mat-form-field class="settings-input">
          <mat-label>Change Username</mat-label>
          <input matInput placeholder="change Username" formControlName="username">
          <mat-icon matSuffix>edit</mat-icon>
        </mat-form-field>
      </mat-card-content>
    </form>
  </mat-card>
  <div class="settings-button">
    <button mat-raised-button color="primary"
    [disabled]="UserCredentials.invalid" (click)="updateCredentials()">
      <mat-icon>save</mat-icon>
      Save Changes
    </button>
  </div>
</div>
